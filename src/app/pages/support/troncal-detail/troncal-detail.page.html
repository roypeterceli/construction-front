<header class="flex md:flex-row justify-start items-start md:justify-between md:items-center mb-5">
    <div class="flex justify-start items-start w-full md:w-5/12">
        <wow-title [url]="['../../detalles']">
            <h2 class="text-[#7030A0]">
                Gesti贸n de Troncal
            </h2>
        </wow-title>
    </div>
    <div class="flex justify-end items-end w-full md:w-5/12">
        <button type="button" mat-flat-button class="mb-6 md:mb-0" (click)="openSaveNodeDlg()">
            <mat-icon>add</mat-icon>
            Agregar nodo
        </button>
    </div>
</header>

<div *ngIf="zone() as item">
    <div class="flex md:flex-row justify-start items-center rounded bg-white shadow w-full md:w-12/12 p-6 gap-4">
        <div class="id px-7">
            <h6 class="text-gray-400 text-xs">ID</h6>
            <span class="font-semibold text-[#7030A0]">
                {{ item.zoneId }}
            </span>
        </div>
        <div class="departamento px-7">
            <h6 class="text-gray-400 text-xs">Departamento</h6>
            <span class="font-semibold text-[#7030A0]">
                {{ item.departmentName }}
            </span>
        </div>
        <div class="provincia px-7">
            <h6 class="text-gray-400 text-xs">Provincia</h6>
            <span class="font-semibold text-[#7030A0]">
                {{ item.provinceName }}
            </span>
        </div>
        <div class="codigo px-7">
            <h6 class="text-gray-400 text-xs">Distrito</h6>
            <span class="text-[#7030A0] font-semibold">
                <!-- {{ item.ubigeoDistrictId}} -->
            </span>
        </div>
        <div class="troncales px-7">
            <h6 class="text-gray-400 text-xs">C贸digo</h6>
            <span class="text-[#7030A0] font-semibold">
                {{ item.zoneCode }} 
            </span>
        </div>
        <div class="cajas-nap px-7">
            <h6 class="text-gray-400 text-xs">Nodos</h6>
            <span class="font-semibold">
                {{ item.boxNaps }}
            </span>
        </div>

        <div class="construccion px-7">
            <h6 class="text-gray-400 text-xs">Construcci贸n</h6>
            <span class="font-semibold">
                {{ item.advanceId + " %"}}
            </span>
        </div>
        
        <div class="estado px-7">
            <h6 class="text-gray-400 text-xs">Estado</h6>
            @if(item.stateId === 1){
            <div class="rounded-xl px-2 py-1 font-medium text-xs flex-none bg-blue-600/10 text-blue-600">
                Pendiente
            </div>
            } @else if(item.stateId === 2){
            <div class="rounded-xl px-2 py-1 font-medium text-xs flex-none bg-[#4C6DAF] text-white">
                En Construcci贸n
            </div>
            }@else if(item.stateId === 3){
            <div class="rounded-xl px-2 py-1 font-medium text-xs flex-none bg-[#4CAF50] text-green-600">
                Construido
            </div>
            }
        </div>
        <div class="venta px-7">
            <h6 class="text-gray-400 text-xs">Venta</h6>
            @if(item.saleId === 1){
                <div class="rounded-xl px-2 py-1 font-medium text-xs flex-none bg-[#9C9C9C] text-white">
                    Bloqueado
                </div>
            } @else if(item.saleId === 2){
                <div class="rounded-xl px-2 py-1 font-medium text-xs flex-none bg-[#4CAF50] text-amber-600">
                    En venta
                </div>
            }
        </div>
    </div>
</div>

<div class="flex justify-between pt-6 pb-6 gap-3">
    <div class="w-full lg:w-4/12">
        <mat-card class="mat-card-no-space">
            <mat-card-content>
                <wow-dynamic-table [columns]="columns" [data]="data()" showDropdownMenu [dropdownMenu]="actionsMenu"
                    (rowDblClick)="goToDetail($event)" [isLoading]="loading()"></wow-dynamic-table>
            </mat-card-content>
        </mat-card>
        <mat-menu #actionsMenu="matMenu" xPosition="before" yPosition="below">
            <ng-template let-data="rowSelected" matMenuContent>
                <button mat-menu-item (click)="edit(data)">
                    <mat-icon>edit</mat-icon>
                    <span>Editar</span>
                </button>
            </ng-template>
        </mat-menu>
    </div>
    <div class="w-full lg:w-8/12">
        <wow-show-node-support></wow-show-node-support>
    </div>
</div>